

Users of a completing-read enhancement framework (such as Ivy, Selectrum, or Vertico) may wish to use the following two functions:

persp-switch-to-buffer* replaces switch-to-buffer
persp-kill-buffer* replaces kill-buffer
Both these functions behave like the built-ins, but use completing-read directly. When called normally, they list buffers filtered by the current perspective. With a prefix argument, they list buffers in all perspectives.

The following sample use-package invocation changes Emacs default key bindings to use the replacements:

(use-package perspective
  :bind (("C-x b" . persp-switch-to-buffer*)
         ("C-x k" . persp-kill-buffer*))
  :config
  (persp-mode))

